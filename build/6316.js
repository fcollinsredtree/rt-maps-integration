"use strict";(globalThis.webpackChunkredtree_maps_integration=globalThis.webpackChunkredtree_maps_integration||[]).push([[6316],{6067:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function s(t,e,n,r,s,o,a,c,i){return[t,e,n,r,s,o,a,c,i]}n.d(e,{fA:()=>s,vt:()=>r,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:r,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},51516:(t,e,n)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function s(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}n.d(e,{o8:()=>s,vt:()=>r,zK:()=>o});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:s,create:r,createView:function(t,e){return new Float64Array(t,e,16)},fromValues:function(t,e,n,r,s,o,a,c,i,u,l,f,h,M,p,m){return[t,e,n,r,s,o,a,c,i,u,l,f,h,M,p,m]}},Symbol.toStringTag,{value:"Module"}))},37987:(t,e,n)=>{function r(){return[0,0,0,1]}function s(t){return[t[0],t[1],t[2],t[3]]}n.d(e,{o8:()=>s,vt:()=>r,zK:()=>o});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:s,create:r,createView:function(t,e){return new Float64Array(t,e,4)},fromValues:function(t,e,n,r){return[t,e,n,r]}},Symbol.toStringTag,{value:"Module"}))},68027:(t,e,n)=>{n.d(e,{A6:()=>m,Xd:()=>l,Xr:()=>M,hZ:()=>v,lw:()=>f,t2:()=>S,x8:()=>u});var r=n(6067),s=n(37987),o=n(5163),a=n(9293),c=n(14173),i=n(9810);function u(t,e,n){n*=.5;const r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function l(t,e){const n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>(0,a.FD)()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function f(t,e,n){const r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],i=n[1],u=n[2],l=n[3];return t[0]=r*l+a*c+s*u-o*i,t[1]=s*l+a*i+o*c-r*u,t[2]=o*l+a*u+r*i-s*c,t[3]=a*l-r*c-s*i-o*u,t}function h(t,e,n,r){const s=e[0],o=e[1],c=e[2],i=e[3];let u,l,f,h,M,p=n[0],m=n[1],_=n[2],v=n[3];return l=s*p+o*m+c*_+i*v,l<0&&(l=-l,p=-p,m=-m,_=-_,v=-v),1-l>(0,a.FD)()?(u=Math.acos(l),f=Math.sin(u),h=Math.sin((1-r)*u)/f,M=Math.sin(r*u)/f):(h=1-r,M=r),t[0]=h*s+M*p,t[1]=h*o+M*m,t[2]=h*c+M*_,t[3]=h*i+M*v,t}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function p(t,e){const n=e[0]+e[4]+e[8];let r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const s=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*s+o]-e[3*o+s])*r,t[s]=(e[3*s+n]+e[3*n+s])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t}function m(t,e,n,r){const s=.5*Math.PI/180;e*=s,n*=s,r*=s;const o=Math.sin(e),a=Math.cos(e),c=Math.sin(n),i=Math.cos(n),u=Math.sin(r),l=Math.cos(r);return t[0]=o*i*l-a*c*u,t[1]=a*c*l+o*i*u,t[2]=a*i*u-o*c*l,t[3]=a*i*l+o*c*u,t}const _=i.c,v=i.s,A=i.f,E=f,I=i.b,g=i.g,N=i.l,d=i.i,w=d,P=i.j,T=P,y=i.n,S=i.a,b=i.e,F=(0,o.vt)(),L=(0,o.fA)(1,0,0),O=(0,o.fA)(0,1,0),C=(0,s.vt)(),z=(0,s.vt)(),R=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:A,calculateW:function(t,e){const n=e[0],r=e[1],s=e[2];return t[0]=n,t[1]=r,t[2]=s,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-s*s)),t},conjugate:M,copy:_,dot:g,equals:b,exactEquals:S,fromEuler:m,fromMat3:p,getAxisAngle:l,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:function(t,e){const n=e[0],r=e[1],s=e[2],o=e[3],a=n*n+r*r+s*s+o*o,c=a?1/a:0;return t[0]=-n*c,t[1]=-r*c,t[2]=-s*c,t[3]=o*c,t},len:w,length:d,lerp:N,mul:E,multiply:f,normalize:y,random:function(t){const e=a.Ov,n=e(),r=e(),s=e(),o=Math.sqrt(1-n),c=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=c*Math.sin(2*Math.PI*s),t[3]=c*Math.cos(2*Math.PI*s),t},rotateX:function(t,e,n){n*=.5;const r=e[0],s=e[1],o=e[2],a=e[3],c=Math.sin(n),i=Math.cos(n);return t[0]=r*i+a*c,t[1]=s*i+o*c,t[2]=o*i-s*c,t[3]=a*i-r*c,t},rotateY:function(t,e,n){n*=.5;const r=e[0],s=e[1],o=e[2],a=e[3],c=Math.sin(n),i=Math.cos(n);return t[0]=r*i-o*c,t[1]=s*i+a*c,t[2]=o*i+r*c,t[3]=a*i-s*c,t},rotateZ:function(t,e,n){n*=.5;const r=e[0],s=e[1],o=e[2],a=e[3],c=Math.sin(n),i=Math.cos(n);return t[0]=r*i+s*c,t[1]=s*i-r*c,t[2]=o*i+a*c,t[3]=a*i-o*c,t},rotationTo:function(t,e,n){const r=(0,c.m)(e,n);return r<-.999999?((0,c.b)(F,L,e),(0,c.H)(F)<1e-6&&(0,c.b)(F,O,e),(0,c.n)(F,F),u(t,F,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,c.b)(F,e,n),t[0]=F[0],t[1]=F[1],t[2]=F[2],t[3]=1+r,y(t,t))},scale:I,set:v,setAxes:function(t,e,n,r){const s=R;return s[0]=n[0],s[3]=n[1],s[6]=n[2],s[1]=r[0],s[4]=r[1],s[7]=r[2],s[2]=-e[0],s[5]=-e[1],s[8]=-e[2],y(t,p(t,s))},setAxisAngle:u,slerp:h,sqlerp:function(t,e,n,r,s,o){return h(C,e,s,o),h(z,n,r,o),h(t,C,z,2*o*(1-o)),t},sqrLen:T,squaredLength:P,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},44442:(t,e,n)=>{n.d(e,{l:()=>u});var r=n(68628),s=n(19618),o=n(5163);function a(t,e,n){const r=Math.sin(t),s=Math.cos(t),o=Math.sin(e),a=Math.cos(e),c=n;return c[0]=-r,c[4]=-o*s,c[8]=a*s,c[12]=0,c[1]=s,c[5]=-o*r,c[9]=a*r,c[13]=0,c[2]=0,c[6]=a,c[10]=o,c[14]=0,c[3]=0,c[7]=0,c[11]=0,c[15]=1,c}var c=n(77026),i=n(57362);function u(t,e,n,r){if(null==t||null==r)return!1;const o=(0,c.Qk)(t,c.Wv),u=(0,c.Qk)(r,c.zp);if(o===u&&!l(u)&&(o!==c.rz.UNKNOWN||(0,i.aI)(t,r)))return(0,s.kN)(n,e),!0;if(l(u)){const t=c.w5[o][c.rz.LON_LAT],r=c.w5[c.rz.LON_LAT][u];return null!=t&&null!=r&&(t(e,0,h,0),r(h,0,M,0),a(f*h[0],f*h[1],n),n[12]=M[0],n[13]=M[1],n[14]=M[2],!0)}if(!(u!==c.rz.WEB_MERCATOR&&u!==c.rz.PLATE_CARREE&&u!==c.rz.WGS84&&u!==c.rz.CGCS2000||o!==c.rz.WGS84&&o!==c.rz.SPHERICAL_ECEF&&o!==c.rz.WEB_MERCATOR&&o!==c.rz.CGCS2000)){const t=c.w5[o][c.rz.LON_LAT],r=c.w5[c.rz.LON_LAT][u];return null!=t&&null!=r&&(t(e,0,h,0),r(h,0,M,0),o===c.rz.SPHERICAL_ECEF?function(t,e,n){a(t,e,n),(0,s.mg)(n,n)}(f*h[0],f*h[1],n):(0,s.D_)(n),n[12]=M[0],n[13]=M[1],n[14]=M[2],!0)}return!1}function l(t){return t===c.rz.SPHERICAL_ECEF||t===c.rz.SPHERICAL_MARS_PCPF||t===c.rz.SPHERICAL_MOON_PCPF}const f=(0,r.kU)(1),h=(0,o.vt)(),M=(0,o.vt)()},30101:(t,e,n)=>{n.d(e,{g:()=>a});var r=n(5163),s=n(48460),o=n(31163);function a(t,e,n,r){if((0,s.canProjectWithoutEngine)(t.spatialReference,n)){c[0]=t.x,c[1]=t.y;const s=t.z;return c[2]=s??r??0,(0,o.projectBuffer)(c,t.spatialReference,0,e,n,0,1)}const a=(0,s.tryProjectWithZConversion)(t,n);return!!a&&(e[0]=a?.x,e[1]=a?.y,e[2]=a?.z??r??0,!0)}const c=(0,r.vt)()},47813:(t,e,n)=>{n.d(e,{Y0:()=>u,lO:()=>l});var r=n(47692),s=n(62771),o=n(57362);const a=new s.A(r.fv),c=new s.A(r.FY),i=new s.A(r.LJ),u=new s.A(r.Ro);function l(t){const e=f.get(t);if(e)return e;let n=a;if(t)if(t===c)n=c;else if(t===i)n=i;else{const e=t.wkid,r=t.latestWkid;if(null!=e||null!=r)(0,o.tl)(e)||(0,o.tl)(r)?n=c:((0,o.ZL)(e)||(0,o.ZL)(r))&&(n=i);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===h?n=c:t===M&&(n=i)}}}return f.set(t,n),n}const f=new Map,h=c.wkt.toUpperCase(),M=i.wkt.toUpperCase()},61733:(t,e,n)=>{n.d(e,{vt:()=>o,lU:()=>c,Qj:()=>a}),n(68628);var r=n(14173),s=n(5163);function o(t=p){return[t[0],t[1],t[2],t[3]]}function a(t){return t}function c(t,e,n,s=0,a=Math.floor(n*(1/3)),p=Math.floor(n*(2/3))){if(n<3)return!1;e(u,s);let m=a,_=!1;for(;m<n-1&&!_;)e(l,m),m++,_=!(0,r.e)(u,l);if(!_)return!1;for(m=Math.max(m,p),_=!1;m<n&&!_;)e(f,m),m++,(0,r.f)(h,u,l),(0,r.n)(h,h),(0,r.f)(M,l,f),(0,r.n)(M,M),_=!(0,r.e)(u,f)&&!(0,r.e)(l,f)&&Math.abs((0,r.m)(h,M))<i;return _?(function(t,e,n,r=o()){const s=n[0]-e[0],a=n[1]-e[1],c=n[2]-e[2],i=t[0]-e[0],u=t[1]-e[1],l=t[2]-e[2],f=a*l-c*u,h=c*i-s*l,M=s*u-a*i,p=f*f+h*h+M*M,m=Math.abs(p-1)>1e-5&&p>1e-12?1/Math.sqrt(p):1;r[0]=f*m,r[1]=h*m,r[2]=M*m,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2])}(u,l,f,t),!0):(0!==s||1!==a||2!==p)&&c(t,e,n,0,1,2)}n(9810),n(66945),n(81389),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)();const i=.99619469809,u=(0,s.vt)(),l=(0,s.vt)(),f=(0,s.vt)(),h=(0,s.vt)(),M=(0,s.vt)(),p=[0,0,1,0];var m,_;(_=m||(m={}))[_.NONE=0]="NONE",_[_.CLAMP=1]="CLAMP",_[_.INFINITE_MIN=4]="INFINITE_MIN",_[_.INFINITE_MAX=8]="INFINITE_MAX",m.INFINITE_MIN,m.INFINITE_MAX,m.INFINITE_MAX},66945:(t,e,n)=>{n.d(e,{g7:()=>a});var r=n(68628),s=n(14173),o=n(5163);function a(t,e){const n=(0,s.m)(t,e)/((0,s.l)(t)*(0,s.l)(e));return-(0,r.XM)(n)}(0,o.vt)(),(0,o.vt)()},81389:(t,e,n)=>{n.d(e,{Rc:()=>h,J8:()=>M,rq:()=>f}),n(82555);var r=n(11883),s=n(6067),o=n(51516),a=n(37987),c=n(26546),i=n(5163),u=n(8884);class l{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new l(c.vt)}static createVec3f64(){return new l(i.vt)}static createVec4f64(){return new l(u.vt)}static createMat3f64(){return new l(s.vt)}static createMat4f64(){return new l(o.vt)}static createQuatf64(){return new l(a.vt)}get test(){}}l.createVec2f64();const f=l.createVec3f64(),h=(l.createVec4f64(),l.createMat3f64(),l.createMat4f64()),M=l.createQuatf64()},28747:(t,e,n)=>{n.r(e),n.d(e,{assetMapFromAssetMapsJSON:()=>E,extractMesh:()=>_,meshFeatureSetFromJSON:()=>m});var r=n(90071),s=n(16431),o=n(60764),a=n(93710),c=n(79464),i=n(54790),u=n(62771),l=n(85299),f=n(68430),h=n(85310),M=n(40546);const p=()=>s.A.getLogger("esri.rest.support.meshFeatureSet");function m(t,e,n){const s=n.features;n.features=[],delete n.geometryType;const o=M.A.fromJSON(n);if(o.geometryType="mesh",!n.assetMaps)return o;const a=E(e,n.assetMaps),c=t.sourceSpatialReference??u.A.WGS84,i=n.globalIdFieldName,{outFields:l}=t,f=null!=l&&l.length>0?(h=l.includes("*")?null:new Set(l),({attributes:t})=>{if(!t)return{};if(!h)return t;for(const e in t)h.has(e)||delete t[e];return t}):()=>({});var h;for(const t of s){const n=_(t,i,c,e,a);o.features.push(new r.A({geometry:n,attributes:f(t)}))}return o}function _(t,e,n,r,s){const o=t.attributes[e],u=s.get(o);if(null==u||!t.geometry)return null;const h=function({attributes:t},e,{transformFieldRoles:n}){const r=t[n.originX],s=t[n.originY],o=t[n.originZ];return new i.A({x:r,y:s,z:o,spatialReference:e})}(t,n,r),M=a.A.fromJSON(t.geometry);M.spatialReference=n;const p=function(t,{transformFieldRoles:e}){return new l.A({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}(t.attributes,r),m=n.isGeographic?"local":"georeferenced",_=function(t){const e=Array.from(t.files.values()),n=new Array;for(const t of e){if(t.status!==v.COMPLETED)return null;const e=new Array;for(const n of t.parts){if(!n)return null;e.push(new f.Bq(n.url,n.hash))}n.push(new f.Qp(t.name,t.mimeType,e))}return n}(u);return _?c.A.createWithExternalSource(h,_,{extent:M,transform:p,vertexSpace:m}):c.A.createIncomplete(h,{extent:M,transform:p,vertexSpace:m})}var v,A;function E(t,e){const n=new Map;for(const r of e){const e=r.parentGlobalId;if(null==e)continue;const s=r.assetName,a=r.assetType,c=r.assetHash,i=r.assetURL,u=r.conversionStatus,l=r.seqNo,f=(0,h.Fm)(a,t.supportedFormats);if(!f){p().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${a}, but it does not list it as a supported type`);continue}const M=(0,o.tE)(n,e,(()=>({files:new Map})));(0,o.tE)(M.files,s,(()=>({name:s,type:a,mimeType:f,status:I(u),parts:[]}))).parts[l]={hash:c,url:i}}return n}function I(t){switch(t){case"COMPLETED":case"SUBMITTED":return v.COMPLETED;case"INPROGRESS":return v.PENDING;default:return v.FAILED}}(A=v||(v={}))[A.FAILED=0]="FAILED",A[A.PENDING=1]="PENDING",A[A.COMPLETED=2]="COMPLETED"}}]);